<% if user_signed_in? %>
<header>
	<%= render 'layouts/navigation' %>
</header>

<%= render 'layouts/side_navbar' %>

<center>
<h1>Product</h1>

<div class="row" style="margin-left: 10em;">
	<% if flash[:error] %>
   		<div class="notice"><%= flash[:error] %></div>
 	<% end %>
	<% @products.each do |product| %>
	<div class="col-md-4">
		<div class="card" style="width: 15rem;">
  			<div class="card-body">
    			<h5 class="card-title">Product</h5>
    			<br>
        		<p class="card-text">Name: <%= product.name %></p>
        		<p class="card-text">Price: <%= product.price %></p>
        		<% if product.quantity.to_i.zero? %>
        			<% unless @wishlist.wishlist_items.pluck(:product_id).include?(product.id) %>
        				<%= form_with url: product_wishlist_items_path(:product_id => product.id), method: :post do |f| %>       				
        					<%= f.number_field :quantity,value:1, in: 1..10 %><br><br>
							<%= f.submit "Add to Wishlist" %>
        				<% end %>
        			<% else %>
        				<p>Added to Wishlist</p>
        			<% end %>
        		<% else %>
        			
        			<% unless @cart.cart_items.pluck(:product_id).include?(product.id) %>
        				<%= form_with url: product_cart_items_path(:product_id => product.id), method: :post do |f| %>       				
        					<%= f.number_field :quantity,value:1, in: 1..10 %><br><br>
							<%= f.submit "Add to Cart" %>
        				<% end %>
        			<% else %>
        				<p>Added to Cart</p>
        			<% end %>

    			<% end %>
    			<br>
    			<%= link_to "View Details", home_path(current_user,product_id: product.id), class: "btn btn-outline-success" %>
  			</div>
		</div>
	</div>
	<% end %>
</div>
</center>	
<% else %>

<br>
	<li>
  		<%= link_to('Login', new_user_session_path) %>  
  	</li>
  	<li>
  		<%= link_to('SignUp', new_user_registration_path) %>  
  	</li>
<% end %>

